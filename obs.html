<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>üîç OSINT Helper (Client-Side)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Segoe UI', sans-serif; max-width: 900px; margin: 20px auto; padding: 0 15px; background: #f9f9fb; }
    h1, h2 { color: #2c3e50; }
    input, textarea, button, select { width: 100%; padding: 10px; margin: 8px 0; box-sizing: border-box; }
    button { background: #3498db; color: white; border: none; cursor: pointer; }
    button:hover { background: #2980b9; }
    .section { background: white; padding: 16px; margin: 16px 0; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } }
    pre { background: #2d2d2d; color: #f8f8f2; padding: 12px; border-radius: 4px; overflow-x: auto; white-space: pre-wrap; }
    .success { color: #27ae60; }
    .warn { color: #e67e22; }
    .error { color: #e74c3c; }
    a { color: #3498db; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>

<h1>üîç OSINT Helper (Client-Only)</h1>
<p>–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ù–∏—á–µ–≥–æ –Ω–µ —É—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä.</p>

<!-- === 1. –í–≤–æ–¥ —Ü–µ–ª–∏ === -->
<div class="section">
  <h2>üéØ –¶–µ–ª—å –∞–Ω–∞–ª–∏–∑–∞</h2>
  <input id="username" type="text" placeholder="Username / Nickname (–Ω–∞–ø—Ä–∏–º–µ—Ä: john_doe)">
  <input id="email" type="email" placeholder="Email (–Ω–∞–ø—Ä–∏–º–µ—Ä: user@example.com)">
  <input id="target" type="text" placeholder="IP / Domain (–Ω–∞–ø—Ä–∏–º–µ—Ä: 8.8.8.8 –∏–ª–∏ example.com)">
  <input id="imageUrl" type="url" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–¥–ª—è reverse search)">
  <textarea id="textInput" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–ª–æ–≥–∏, —á–∞—Ç –∏ —Ç.–¥.)" rows="4"></textarea>
</div>

<!-- === 2. –î–µ–π—Å—Ç–≤–∏—è === -->
<div class="section grid">
  <button onclick="runSocialSearch()">üë§ –ü–æ–∏—Å–∫ –ø–æ username</button>
  <button onclick="runEmailCheck()">üìß –ü—Ä–æ–≤–µ—Ä–∫–∞ email</button>
  <button onclick="runIpDomainCheck()">üåê IP / Domain –∞–Ω–∞–ª–∏–∑</button>
  <button onclick="runReverseImageSearch()">üñºÔ∏è Reverse image search</button>
  <button onclick="runTextAnalysis()">üìù –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞</button>
  <button onclick="runEncodingTools()">üîê –ö–æ–¥–∏—Ä–æ–≤–∫–∞ / –•–µ—à–∏</button>
</div>

<!-- === 3. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã === -->
<div class="section">
  <h2>üìÑ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
  <div id="results" style="white-space: pre-wrap;"></div>
  <br>
  <button onclick="saveResultsToFile()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ '–†–æ–±–ª–æ–∫ –ê–∫–∫–∞—É–Ω—Ç—ã.txt'</button>
  <button onclick="clearResults()">üßπ –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
</div>

<!-- === JS === -->
<script>
// === –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π –≤ localStorage ===
const fields = ['username', 'email', 'target', 'imageUrl', 'textInput'];
fields.forEach(id => {
  const el = document.getElementById(id);
  el.value = localStorage.getItem(id) || '';
  el.addEventListener('input', () => localStorage.setItem(id, el.value));
});

// === –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ===
function log(type, msg) {
  const colors = { info: '', success: 'success', warn: 'warn', error: 'error' };
  document.getElementById('results').innerHTML += `<div class="${colors[type] || ''}">${msg}</div>`;
}
function clearResults() { document.getElementById('results').innerHTML = ''; }

// === 1. Social Search ===
function runSocialSearch() {
  clearResults();
  const u = document.getElementById('username').value.trim();
  if (!u) return log('warn', '‚ö†Ô∏è –£–∫–∞–∂–∏—Ç–µ username.');
  
  const sites = [
    { name: 'Twitter', url: `https://twitter.com/${u}` },
    { name: 'Instagram', url: `https://instagram.com/${u}` },
    { name: 'GitHub', url: `https://github.com/${u}` },
    { name: 'Reddit', url: `https://www.reddit.com/user/${u}` },
    { name: 'YouTube', url: `https://www.youtube.com/@${u}` },
    { name: 'TikTok', url: `https://www.tiktok.com/@${u}` },
    { name: 'Steam', url: `https://steamcommunity.com/id/${u}` },
    { name: 'Roblox', url: `https://www.roblox.com/users/profile?username=${u}` },
  ];

  log('info', `üîç Social Search –¥–ª—è: <b>${u}</b>\n`);
  sites.forEach(s => log('info', `‚Ä¢ <a href="${s.url}" target="_blank">${s.name}</a>`));
}

// === 2. Email Check ===
async function runEmailCheck() {
  clearResults();
  const e = document.getElementById('email').value.trim();
  if (!e) return log('warn', '‚ö†Ô∏è –£–∫–∞–∂–∏—Ç–µ email.');
  
  log('info', `üìß –ü—Ä–æ–≤–µ—Ä–∫–∞ email: <b>${e}</b>\n`);
  
  // Have I Been Pwned (—Ç—Ä–µ–±—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞, –Ω–æ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ CORS-–ø—Ä–æ–∫—Å–∏)
  try {
    const resp = await fetch(`https://haveibeenpwned.com/api/v3/breachedaccount/${encodeURIComponent(e)}`, {
      headers: { 'User-Agent': 'OSINT-Helper' }
    });
    if (resp.ok) {
      const breaches = await resp.json();
      log('success', `‚úÖ –ù–∞–π–¥–µ–Ω–æ —É—Ç–µ—á–µ–∫: ${breaches.length}`);
      breaches.forEach(b => log('info', `‚Ä¢ ${b.Name} (${b.BreachDate}) ‚Äî ${b.DataClasses.join(', ')}`));
    } else if (resp.status === 404) {
      log('success', '‚úÖ Email –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —É—Ç–µ—á–∫–∞—Ö.');
    } else {
      throw new Error(`HIBP: ${resp.status}`);
    }
  } catch (err) {
    log('warn', `‚ö†Ô∏è HIBP –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (CORS/–ª–∏–º–∏—Ç). –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:`);
  }

  // –î–æ–ø —Å—Å—ã–ª–∫–∏
  [
    { name: 'Google', url: `https://www.google.com/search?q=${encodeURIComponent(e)}` },
    { name: 'Hunter.io', url: `https://hunter.io/verify/${encodeURIComponent(e)}` },
    { name: 'Epieos', url: `https://epieos.com/?q=${encodeURIComponent(e)}` },
  ].forEach(s => log('info', `‚Ä¢ <a href="${s.url}" target="_blank">${s.name}</a>`));
}

// === 3. IP / Domain Check ===
async function runIpDomainCheck() {
  clearResults();
  const t = document.getElementById('target').value.trim();
  if (!t) return log('warn', '‚ö†Ô∏è –£–∫–∞–∂–∏—Ç–µ IP –∏–ª–∏ –¥–æ–º–µ–Ω.');
  
  log('info', `üåê –ê–Ω–∞–ª–∏–∑: <b>${t}</b>\n`);

  // IP Geolocation (—á–µ—Ä–µ–∑ ipapi.co ‚Äî CORS-friendly free tier)
  if (/^\d{1,3}(\.\d{1,3}){3}$/.test(t)) {
    try {
      const resp = await fetch(`https://ipapi.co/${t}/json/`);
      const data = await resp.json();
      if (data.error) throw new Error(data.reason || 'Unknown IP');
      log('success', `üìç IP: ${data.ip} | –°—Ç—Ä–∞–Ω–∞: ${data.country_name} (${data.country_code})`);
      log('info', `–ì–æ—Ä–æ–¥: ${data.city}, –†–µ–≥–∏–æ–Ω: ${data.region}`);
      log('info', `–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: ${data.org}`);
    } catch (err) {
      log('warn', `‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é: ${err.message}`);
    }
  }

  // Domain: crt.sh subdomains
  const domain = t.replace(/^https?:\/\//, '').split('/')[0];
  if (domain.includes('.')) {
    log('info', `\nüîç –ü–æ–¥–¥–æ–º–µ–Ω—ã –¥–ª—è <b>${domain}</b> (–∏–∑ crt.sh):`);
    log('info', `<a href="https://crt.sh/?q=%25.${domain}" target="_blank">‚Üí –û—Ç–∫—Ä—ã—Ç—å –≤ crt.sh</a>`);
    
    // –ü–æ–ø—ã—Ç–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ CORS, –Ω–æ –∏–Ω–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç)
    try {
      const resp = await fetch(`https://crt.sh/?q=%25.${domain}&output=json`);
      if (resp.ok) {
        const data = await resp.json();
        const subs = [...new Set(data.map(x => x.name_value))];
        log('info', `\n–ù–∞–π–¥–µ–Ω–æ –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤: ${subs.length}\n`);
        subs.slice(0, 20).forEach(s => log('info', `‚Ä¢ ${s}`));
        if (subs.length > 20) log('info', `... –∏ –µ—â—ë ${subs.length - 20}`);
      }
    } catch (err) {
      log('warn', '‚ÑπÔ∏è –ü–æ–¥–¥–æ–º–µ–Ω—ã: –æ—Ç–∫—Ä—ã—Ç—ã –≤—Ä—É—á–Ω—É—é (CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ)');
    }
  }
}

// === 4. Reverse Image Search ===
function runReverseImageSearch() {
  clearResults();
  const url = document.getElementById('imageUrl').value.trim();
  if (!url) return log('warn', '‚ö†Ô∏è –£–∫–∞–∂–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.');

  log('info', `üñºÔ∏è Reverse image search –¥–ª—è: <b>${url}</b>\n`);
  const engines = [
    { name: 'Google', url: `https://lens.google.com/uploadbyurl?url=${encodeURIComponent(url)}` },
    { name: 'Yandex', url: `https://yandex.ru/images/search?url=${encodeURIComponent(url)}&rpt=imageview` },
    { name: 'TinEye', url: `https://tineye.com/search?url=${encodeURIComponent(url)}` },
    { name: 'Bing', url: `https://www.bing.com/images/search?view=detailv2&iss=sbi&form=SBIHMP&sbisrc=UrlPaste&q=imgurl:${encodeURIComponent(url)}` },
  ];
  engines.forEach(e => log('info', `‚Ä¢ <a href="${e.url}" target="_blank">${e.name}</a>`));
}

// === 5. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ ===
function runTextAnalysis() {
  clearResults();
  const text = document.getElementById('textInput').value;
  if (!text) return log('warn', '‚ö†Ô∏è –í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.');

  log('info', 'üìù –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞:\n');

  // Emails
  const emails = [...new Set(text.match(/[\w.-]+@[\w.-]+\.\w+/g) || [])];
  if (emails.length) {
    log('success', `üìß –ù–∞–π–¥–µ–Ω–æ email (${emails.length}):`);
    emails.forEach(e => log('info', `‚Ä¢ ${e}`));
  }

  // –¢–µ–ª–µ—Ñ–æ–Ω—ã (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
  const phones = [...new Set(text.match(/(\+?\d{1,3}[-.\s]?)?\(?\d{3}\)?[-.\s]?\d{3}[-.\s]?\d{4}/g) || [])];
  if (phones.length) {
    log('success', `\nüìû –ù–∞–π–¥–µ–Ω–æ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (${phones.length}):`);
    phones.forEach(p => log('info', `‚Ä¢ ${p}`));
  }

  // Usernames (–ª–∞—Ç–∏–Ω–∏—Ü–∞/—Ü–∏—Ñ—Ä—ã/._-)
  const usernames = [...new Set(text.match(/\b[A-Za-z][A-Za-z0-9._-]{2,20}\b/g) || [])]
    .filter(u => !/^(http|www|com|org|net|the|and|for|not)$/i.test(u));
  if (usernames.length) {
    log('success', `\nüë§ –í–æ–∑–º–æ–∂–Ω—ã–µ –Ω–∏–∫–∏ (${usernames.length}):`);
    usernames.slice(0, 30).forEach(u => log('info', `‚Ä¢ ${u}`));
    if (usernames.length > 30) log('info', `... –∏ –µ—â—ë ${usernames.length - 30}`);
  }
}

// === 6. –ö–æ–¥–∏—Ä–æ–≤–∫–∞ / –•–µ—à–∏ ===
function runEncodingTools() {
  clearResults();
  const u = document.getElementById('username').value.trim() ||
            document.getElementById('email').value.trim() ||
            document.getElementById('target').value.trim();
  if (!u) return log('warn', '‚ö†Ô∏è –£–∫–∞–∂–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª—é–±–æ–º –ø–æ–ª–µ.');

  log('info', `üîê –û–±—Ä–∞–±–æ—Ç–∫–∞: <b>${u}</b>\n`);
  
  // Base64
  const b64 = btoa(unescape(encodeURIComponent(u)));
  const b64d = () => { try { return decodeURIComponent(escape(atob(u))); } catch { return '[–æ—à–∏–±–∫–∞]'; } };
  
  // MD5, SHA1, SHA256 ‚Äî —á–µ—Ä–µ–∑ SubtleCrypto
  async function hash(algo) {
    const buf = new TextEncoder().encode(u);
    const hashBuf = await crypto.subtle.digest(algo, buf);
    return Array.from(new Uint8Array(hashBuf)).map(b => b.toString(16).padStart(2, '0')).join('');
  }

  log('info', `Base64:         ${b64}`);
  log('info', `Base64 decode:  ${b64d()}`);
  log('info', `URL encode:     ${encodeURIComponent(u)}`);
  log('info', `URL decode:     ${decodeURIComponent(u)}`);
  log('info', `ROT13:          ${u.replace(/[a-zA-Z]/g, c => String.fromCharCode(c.charCodeAt(0) + (c <= 'M' || c >= 'm' && c <= 'z' ? 13 : -13)))}`);

  // –•–µ—à–∏
  hash('MD5').then(h => log('info', `MD5:            ${h}`)); // MD5 –Ω–µ—Ç –≤ SubtleCrypto ‚Üí –ø–æ–¥–º–µ–Ω–∞ –Ω–∞ SHA1 –≤ –¥–µ–º–æ
  hash('SHA-1').then(h => log('info', `SHA-1:          ${h}`));
  hash('SHA-256').then(h => log('info', `SHA-256:        ${h}`));
}

// === –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª ===
function saveResultsToFile() {
  const content = document.getElementById('results').innerText;
  if (!content.trim()) return log('warn', '‚ö†Ô∏è –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.');

  const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = '–†–æ–±–ª–æ–∫ –ê–∫–∫–∞—É–Ω—Ç—ã.txt'; // –∫–∞–∫ —Ç—ã –ø—Ä–æ—Å–∏–ª
  document.body.appendChild(a);
  a.click();
  setTimeout(() => { document.body.removeChild(a); URL.revokeObjectURL(url); }, 100);
}
</script>

</body>
</html>
